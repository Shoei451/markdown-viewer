<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon-md.png" />
    <title>Docs for learning ‚Äî 451-Solarized</title>
    <link rel="stylesheet" href="css/common.css">
    <style>
        /* Category filter styles */
        .filter-section {
            max-width: 1200px;
            margin: 20px auto 40px;
            padding: 0 20px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .category-filter {
            padding: 10px 20px;
            background: var(--card-bg);
            border: 2px solid var(--base1);
            border-radius: 8px;
            color: var(--primary);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .category-filter:hover {
            background: var(--accent);
            color: var(--base3);
            border-color: var(--accent);
        }
        
        .category-filter.active {
            background: var(--accent);
            color: var(--base3);
            border-color: var(--accent);
        }
        
        .doc-card {
            position: relative;
        }
        
        .doc-card.protected::before {
            content: 'üîí';
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
        }
        
        .doc-tags {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-top: 12px;
        }
        
        .doc-tag {
            padding: 4px 10px;
            background: var(--entry);
            border: 1px solid var(--base1);
            border-radius: 4px;
            font-size: 0.75rem;
            color: var(--secondary);
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--secondary);
            grid-column: 1 / -1;
        }
        
        .empty-state h3 {
            color: var(--primary);
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

<!-- Theme Toggle -->
<span class="logo-switches">
    <button id="theme-toggle" title="„ÉÜ„Éº„ÉûÂàáÊõø">
        <svg id="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
        <svg id="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
    </button>
</span>

<!-- Header -->
<header>
    <div style="font-size: 4rem; margin-bottom: 20px;">üìö</div>
    <h1>Docs for learning</h1>
    <p>Various learning resources for high school students</p>
</header>

<!-- Introduction -->
<section class="intro">
    <h2>Welcome</h2>
    <p>Various learning resources for high school students.<br>
    üîí Documents with a lock icon are password protected.</p>
</section>

<!-- Category Filters -->
<div class="filter-section" id="categoryFilters">
    <button class="category-filter active" data-category="all">
        All
    </button>
</div>

<!-- Documents Cards -->
<section class="cards-container" id="documentsContainer">
    <!-- Cards will be generated by JavaScript -->
</section>

<!-- Footer -->
<footer>
    <p>Get in touch: <a href="mailto:okamotoshoei451@gmail.com">okamotoshoei451@gmail.com</a></p>
</footer>

<!-- Scripts -->
<script src="js/theme-toggle.js"></script>

<script>
// ==========================================
// „Éá„Éº„ÇøÂÆöÁæ©Ôºà„Åô„Åπ„Å¶1„Å§„ÅÆ„Éï„Ç°„Ç§„É´„Å´Áµ±ÂêàÔºâ
// ==========================================

const documentsData = {
    categories: {
        'math': {
            name: 'Math',
            icon: 'üìê',
            color: '#b58900'
        },
        'english': {
            name: 'English',
            icon: 'üìö',
            color: '#2aa198'
        },
        'science': {
            name: 'Science',
            icon: 'üî¨',
            color: '#859900'
        },
        'history': {
            name: 'History',
            icon: 'üìú',
            color: '#cb4b16'
        },
        'programming': {
            name: 'Programming',
            icon: 'üíª',
            color: '#268bd2'
        },
        'other': {
            name: 'Other',
            icon: 'üìÑ',
            color: '#6c71c4'
        }
    },
    
    documents: [
        // Êï∞Â≠¶
        {
            id: 'doc-math-001',
            title: '‰∏âËßíÈñ¢Êï∞„ÅÆÂü∫Á§é',
            category: 'math',
            description: 'sin, cos, tan„ÅÆÂü∫Êú¨„Åã„ÇâÂøúÁî®„Åæ„Åß',
            file: 'math/trigonometry-basics.md',
            protected: false,
            tags: ['Êï∞Â≠¶', '‰∏âËßíÈñ¢Êï∞', 'Âü∫Á§é']
        },
        {
            id: 'doc-math-protected-001',
            title: 'ÂÆöÊúüË©¶È®ìÂØæÁ≠ñÔºöÊï∞Â≠¶',
            category: 'math',
            description: 'Êù•ÈÄ±„ÅÆË©¶È®ìÁØÑÂõ≤„ÅÆ„Åæ„Å®„ÇÅ',
            file: null,
            protected: true,
            supabaseId: 'exam-math-2024',
            tags: ['Êï∞Â≠¶', 'Ë©¶È®ìÂØæÁ≠ñ', 'ÈôêÂÆöÂÖ¨Èñã']
        },
        
        // Ëã±Ë™û
        {
            id: 'doc-english-001',
            title: 'Ëã±ÊñáÊ≥ïÔºö‰ªÆÂÆöÊ≥ï',
            category: 'english',
            description: '‰ªÆÂÆöÊ≥ïÈÅéÂéª„Éª‰ªÆÂÆöÊ≥ïÈÅéÂéªÂÆå‰∫Ü„ÅÆ‰Ωø„ÅÑÊñπ',
            file: 'english/subjunctive-mood.md',
            protected: false,
            tags: ['Ëã±Ë™û', 'ÊñáÊ≥ï', '‰ªÆÂÆöÊ≥ï']
        },
        
        // „Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞
        {
            id: 'doc-programming-001',
            title: 'JavaScriptÂü∫Á§é',
            category: 'programming',
            description: 'Â§âÊï∞„ÄÅÈñ¢Êï∞„ÄÅ„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅÆÂü∫Êú¨',
            file: 'programming/javascript-basics.md',
            protected: false,
            tags: ['„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞', 'JavaScript', 'Âü∫Á§é']
        }
    ]
};

// ==========================================
// „É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£Èñ¢Êï∞
// ==========================================

function getDocumentsByCategory(category) {
    return documentsData.documents.filter(doc => doc.category === category);
}

function getDocumentById(id) {
    return documentsData.documents.find(doc => doc.id === id);
}

function getAllCategories() {
    return documentsData.categories;
}

// ==========================================
// UIÁîüÊàêÈñ¢Êï∞
// ==========================================

function generateCategoryFilters() {
    const filtersContainer = document.getElementById('categoryFilters');
    const categories = getAllCategories();
    
    Object.keys(categories).forEach(key => {
        const cat = categories[key];
        const button = document.createElement('button');
        button.className = 'category-filter';
        button.dataset.category = key;
        button.innerHTML = `${cat.icon} ${cat.name}`;
        button.onclick = () => filterByCategory(key);
        filtersContainer.appendChild(button);
    });
}

function generateDocumentCards(documents = documentsData.documents) {
    const container = document.getElementById('documentsContainer');
    container.innerHTML = '';
    
    if (documents.length === 0) {
        container.innerHTML = `
            <div class="empty-state">
                <h3>„Éâ„Ç≠„É•„É°„É≥„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì</h3>
                <p>Âà•„ÅÆ„Ç´„ÉÜ„Ç¥„É™„Éº„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
            </div>
        `;
        return;
    }
    
    documents.forEach(doc => {
        const card = document.createElement('a');
        card.className = `card doc-card${doc.protected ? ' protected' : ''}`;
        card.href = `viewer.html?id=${doc.id}`;
        
        const category = documentsData.categories[doc.category];
        
        card.innerHTML = `
            <div class="card-icon">${category.icon}</div>
            <h3>${doc.title}</h3>
            <p>${doc.description}</p>
            <div class="doc-tags">
                ${doc.tags.map(tag => `<span class="doc-tag">${tag}</span>`).join('')}
            </div>
        `;
        
        container.appendChild(card);
    });
}

function filterByCategory(category) {
    // „Éï„Ç£„É´„Çø„Éº„Éú„Çø„É≥„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„ÇíÊõ¥Êñ∞
    document.querySelectorAll('.category-filter').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[data-category="${category}"]`).classList.add('active');
    
    // „Éâ„Ç≠„É•„É°„É≥„Éà„Çí„Éï„Ç£„É´„Çø„Éº
    if (category === 'all') {
        generateDocumentCards();
    } else {
        const filtered = getDocumentsByCategory(category);
        generateDocumentCards(filtered);
    }
}

// ==========================================
// ÂàùÊúüÂåñ
// ==========================================

// „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂÆå‰∫ÜÂæå„Å´ÂÆüË°å
window.addEventListener('DOMContentLoaded', () => {
    console.log('Documents loaded:', documentsData.documents.length);
    generateCategoryFilters();
    generateDocumentCards();
});
</script>

</body>
</html>