<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon-md.png" />
    <title>Docs for learning â€” 451-Solarized</title>
    <link rel="stylesheet" href="css/common.css">
    <style>
        /* Category filter styles */
        .filter-section {
            max-width: 1200px;
            margin: 20px auto 40px;
            padding: 0 20px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .category-filter {
            padding: 10px 20px;
            background: var(--card-bg);
            border: 2px solid var(--base1);
            border-radius: 8px;
            color: var(--primary);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .category-filter:hover {
            background: var(--accent);
            color: var(--base3);
            border-color: var(--accent);
        }
        
        .category-filter.active {
            background: var(--accent);
            color: var(--base3);
            border-color: var(--accent);
        }
        
        .doc-card {
            position: relative;
        }
        
        .doc-card.protected::before {
            content: 'ğŸ”’';
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
        }
        
        .doc-tags {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-top: 12px;
        }
        
        .doc-tag {
            padding: 4px 10px;
            background: var(--entry);
            border: 1px solid var(--base1);
            border-radius: 4px;
            font-size: 0.75rem;
            color: var(--secondary);
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--secondary);
            grid-column: 1 / -1;
        }
        
        .empty-state h3 {
            color: var(--primary);
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

<!-- Theme Toggle -->
<span class="logo-switches">
    <button id="theme-toggle" title="ãƒ†ãƒ¼ãƒåˆ‡æ›¿">
        <svg id="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
        <svg id="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
    </button>
</span>

<!-- Header -->
<header>
    <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ“š</div>
    <h1>å­¦ç¿’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h1>
    <p>é«˜æ ¡ç”Ÿã®ãŸã‚ã®å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹é›†</p>
</header>

<!-- Introduction -->
<section class="intro">
    <h2>ã‚ˆã†ã“ã</h2>
    <p>å„ç§‘ç›®ã®å­¦ç¿’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥ã«æ•´ç†ã—ã¦ã„ã¾ã™ã€‚<br>
    ğŸ”’ãƒãƒ¼ã‚¯ãŒã¤ã„ã¦ã„ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ä¿è­·ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
</section>

<!-- Category Filters -->
<div class="filter-section" id="categoryFilters">
    <button class="category-filter active" data-category="all">
        ğŸ“‹ ã™ã¹ã¦
    </button>
</div>

<!-- Documents Cards -->
<section class="cards-container" id="documentsContainer">
    <!-- Cards will be generated by JavaScript -->
</section>

<!-- Footer -->
<footer>
    <p>Get in touch: <a href="mailto:okamotoshoei451@gmail.com">okamotoshoei451@gmail.com</a></p>
</footer>

<!-- Scripts -->
<script src="js/theme-toggle.js"></script>

<script>
// ==========================================
// ãƒ‡ãƒ¼ã‚¿å®šç¾©ï¼ˆã™ã¹ã¦1ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«çµ±åˆï¼‰
// ==========================================

const documentsData = {
    categories: {
        'math': {
            name: 'æ•°å­¦',
            icon: 'ğŸ“',
            color: '#b58900'
        },
        'english': {
            name: 'è‹±èª',
            icon: 'ğŸ“š',
            color: '#2aa198'
        },
        'science': {
            name: 'ç†ç§‘',
            icon: 'ğŸ”¬',
            color: '#859900'
        },
        'history': {
            name: 'æ­´å²',
            icon: 'ğŸ“œ',
            color: '#cb4b16'
        },
        'programming': {
            name: 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°',
            icon: 'ğŸ’»',
            color: '#268bd2'
        },
        'other': {
            name: 'ãã®ä»–',
            icon: 'ğŸ“„',
            color: '#6c71c4'
        }
    },
    
    documents: [
        // æ•°å­¦
        {
            id: 'doc-math-001',
            title: 'ä¸‰è§’é–¢æ•°ã®åŸºç¤',
            category: 'math',
            description: 'sin, cos, tanã®åŸºæœ¬ã‹ã‚‰å¿œç”¨ã¾ã§',
            file: 'math/trigonometry-basics.md',
            protected: false,
            tags: ['æ•°å­¦', 'ä¸‰è§’é–¢æ•°', 'åŸºç¤']
        },
        {
            id: 'doc-math-protected-001',
            title: 'å®šæœŸè©¦é¨“å¯¾ç­–ï¼šæ•°å­¦',
            category: 'math',
            description: 'æ¥é€±ã®è©¦é¨“ç¯„å›²ã®ã¾ã¨ã‚',
            file: null,
            protected: true,
            supabaseId: 'exam-math-2024',
            tags: ['æ•°å­¦', 'è©¦é¨“å¯¾ç­–', 'é™å®šå…¬é–‹']
        },
        
        // è‹±èª
        {
            id: 'doc-english-001',
            title: 'è‹±æ–‡æ³•ï¼šä»®å®šæ³•',
            category: 'english',
            description: 'ä»®å®šæ³•éå»ãƒ»ä»®å®šæ³•éå»å®Œäº†ã®ä½¿ã„æ–¹',
            file: 'english/subjunctive-mood.md',
            protected: false,
            tags: ['è‹±èª', 'æ–‡æ³•', 'ä»®å®šæ³•']
        },
        
        // ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°
        {
            id: 'doc-programming-001',
            title: 'JavaScriptåŸºç¤',
            category: 'programming',
            description: 'å¤‰æ•°ã€é–¢æ•°ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åŸºæœ¬',
            file: 'programming/javascript-basics.md',
            protected: false,
            tags: ['ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°', 'JavaScript', 'åŸºç¤']
        }
    ]
};

// ==========================================
// ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
// ==========================================

function getDocumentsByCategory(category) {
    return documentsData.documents.filter(doc => doc.category === category);
}

function getDocumentById(id) {
    return documentsData.documents.find(doc => doc.id === id);
}

function getAllCategories() {
    return documentsData.categories;
}

// ==========================================
// UIç”Ÿæˆé–¢æ•°
// ==========================================

function generateCategoryFilters() {
    const filtersContainer = document.getElementById('categoryFilters');
    const categories = getAllCategories();
    
    Object.keys(categories).forEach(key => {
        const cat = categories[key];
        const button = document.createElement('button');
        button.className = 'category-filter';
        button.dataset.category = key;
        button.innerHTML = `${cat.icon} ${cat.name}`;
        button.onclick = () => filterByCategory(key);
        filtersContainer.appendChild(button);
    });
}

function generateDocumentCards(documents = documentsData.documents) {
    const container = document.getElementById('documentsContainer');
    container.innerHTML = '';
    
    if (documents.length === 0) {
        container.innerHTML = `
            <div class="empty-state">
                <h3>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</h3>
                <p>åˆ¥ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
            </div>
        `;
        return;
    }
    
    documents.forEach(doc => {
        const card = document.createElement('a');
        card.className = `card doc-card${doc.protected ? ' protected' : ''}`;
        card.href = `viewer.html?id=${doc.id}`;
        
        const category = documentsData.categories[doc.category];
        
        card.innerHTML = `
            <div class="card-icon">${category.icon}</div>
            <h3>${doc.title}</h3>
            <p>${doc.description}</p>
            <div class="doc-tags">
                ${doc.tags.map(tag => `<span class="doc-tag">${tag}</span>`).join('')}
            </div>
        `;
        
        container.appendChild(card);
    });
}

function filterByCategory(category) {
    // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
    document.querySelectorAll('.category-filter').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[data-category="${category}"]`).classList.add('active');
    
    // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
    if (category === 'all') {
        generateDocumentCards();
    } else {
        const filtered = getDocumentsByCategory(category);
        generateDocumentCards(filtered);
    }
}

// ==========================================
// åˆæœŸåŒ–
// ==========================================

function initializePage() {
    console.log('Initializing page...');
    console.log('Documents loaded:', documentsData.documents.length);
    generateCategoryFilters();
    generateDocumentCards();
    console.log('Page initialized!');
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†å¾Œã«å®Ÿè¡Œ
// document.readyStateã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ç¢ºå®Ÿã«å®Ÿè¡Œ
if (document.readyState === 'loading') {
    // ã¾ã HTMLãƒ‘ãƒ¼ã‚¹ä¸­
    document.addEventListener('DOMContentLoaded', initializePage);
} else {
    // æ—¢ã«DOMã¯æº–å‚™å®Œäº†ï¼ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒé…ã‚Œã¦èª­ã¿è¾¼ã¾ã‚ŒãŸå ´åˆï¼‰
    initializePage();
}
</script>

</body>
</html>